import{r as l,j as e,c as j}from"./client.js";const S=()=>{const[t,o]=l.useState({openaiKey:"",maxResults:3,skipSponsored:!0,requestDelay:3}),[i,c]=l.useState({message:"",type:""});l.useEffect(()=>{u()},[]);const u=async()=>{try{const s=await chrome.storage.local.get(["openai_api_key","maxResults","skipSponsored","requestDelay"]);o({openaiKey:s.openai_api_key||"",maxResults:s.maxResults||3,skipSponsored:s.skipSponsored??!0,requestDelay:s.requestDelay||3})}catch(s){n("Error loading settings: "+s.message,"error")}},d=async s=>{s.preventDefault();try{await chrome.storage.local.set({openai_api_key:t.openaiKey,maxResults:t.maxResults,skipSponsored:t.skipSponsored,requestDelay:t.requestDelay}),n("Settings saved successfully!","success")}catch(r){n("Error saving settings: "+r.message,"error")}},p=async()=>{try{const s=await chrome.runtime.sendMessage({action:"checkApiConfig"});s.openaiConfigured?n("API connection successful!","success"):n("API connection failed: "+(s.error||"Invalid key"),"error")}catch(s){n("Error testing connection: "+s.message,"error")}},m=async()=>{const s={openaiKey:"",maxResults:3,skipSponsored:!0,requestDelay:3};try{await chrome.storage.local.clear(),o(s),n("Settings reset to defaults","success")}catch(r){n("Error resetting settings: "+r.message,"error")}},n=(s,r="info")=>{c({message:s,type:r}),setTimeout(()=>c({message:"",type:""}),3e3)},a=s=>{const{name:r,value:h,type:x,checked:g}=s.target;o(y=>({...y,[r]:x==="checkbox"?g:h}))};return e.jsxs("div",{className:"container",children:[e.jsx("h1",{children:"Anna AI Shopping Assistant Settings"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"form-group api-key-section",children:[e.jsx("label",{htmlFor:"openaiKey",children:"OpenAI API Key"}),e.jsxs("div",{className:"api-key-container",children:[e.jsx("input",{type:"text",id:"openaiKey",name:"openaiKey",value:t.openaiKey,onChange:a,placeholder:"sk-...",required:!0}),e.jsx("button",{type:"button",onClick:p,children:"Test Connection"})]}),e.jsx("div",{className:"help-text",children:"Required for advanced natural language search capabilities"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"maxResults",children:"Maximum Results to Show"}),e.jsx("input",{type:"number",id:"maxResults",name:"maxResults",min:"1",max:"10",value:t.maxResults,onChange:a}),e.jsx("div",{className:"help-text",children:"Number of products to show in results (1-10)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"skipSponsored",children:"Skip Sponsored Products"}),e.jsx("input",{type:"checkbox",id:"skipSponsored",name:"skipSponsored",checked:t.skipSponsored,onChange:a}),e.jsx("div",{className:"help-text",children:"Don't show sponsored/promoted products in results"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"requestDelay",children:"Minimum Delay Between Requests (seconds)"}),e.jsx("input",{type:"number",id:"requestDelay",name:"requestDelay",min:"3",max:"30",value:t.requestDelay,onChange:a}),e.jsx("div",{className:"help-text",children:"Longer delays reduce the chance of being blocked"})]}),e.jsxs("div",{className:"buttons",children:[e.jsx("button",{type:"button",onClick:m,className:"secondary",children:"Reset Settings"}),e.jsx("button",{type:"submit",children:"Save Settings"})]})]}),i.message&&e.jsx("div",{className:`status ${i.type}`,children:i.message}),e.jsxs("div",{className:"help-text guidelines",children:[e.jsx("p",{children:e.jsx("strong",{children:"Usage Guidelines:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Keep delays between requests reasonable to avoid detection"}),e.jsx("li",{children:"The extension is limited to 100 requests per hour"}),e.jsx("li",{children:"Consider using filters to get more relevant results"}),e.jsx("li",{children:"OpenAI API key is required for advanced natural language processing"})]})]})]})},k=document.getElementById("root"),v=j.createRoot(k);v.render(e.jsx(S,{}));
